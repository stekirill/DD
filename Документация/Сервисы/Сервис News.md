## 1. Общая архитектура

База данных содержит 16 взаимосвязанных таблиц, реализующих:
- Управление пользователями и их профилями
- Систему подписок на каналы и рубрики
- Платежи и реферальную программу
- Работу с контентом и новостными рассылками
- Интеграцию с внешними сервисами (Telegram, OpenAI)

## 2. Основные сущности

### 2.1 Пользователи (users)

**Назначение:** Хранение основной информации о пользователях системы  
**Ключевые поля:**

- `chatgpt_flag` - доступ к ChatGPT
    
- `media_flag` - разрешение медиаконтента
    
- `balance` - баланс
    
- `digest_time` - предпочтительное время рассылки
    

**Связи:**

- С платежами (payments)
    
- С рефералами (referrals)
    
- С рубриками (rubrics)
    

### 2.2 Подписки (users_subscribes)

**Назначение:** Управление подписками пользователей на Telegram-каналы  
**Особенности:**

- Распределение по воркерам (worker_id)
- Флаг иностранных агентов(является ли канал иностранным агентом) (foreign_agent)
- Система категорий и рубрик

**Связи:**

- Многие-ко-многим с rubrics
- Связь с workers через worker_id

### 2.3 Платежи и подписки (payments, subscribe_plans)

**Назначение:** Управление платными подписками и платежами  
**Жизненный цикл:**
1. Создание инвойса (invoices)
2. Обработка платежа (payments)
3. Активация подписки (subscribe_plans)
### 2.4 Работа с контентом

**Каналы (channels):**
- Каталог доступных для подписки каналов
- Классификация по языкам и категориям

**Новости (channels_news):**

- Архив полученных новостей
    
- Связь с оригинальными постами через link_of_news
    

**Дайджесты (digest_news):**

- Персонализированные подборки новостей
    
- Система отложенной отправки (sended flag)